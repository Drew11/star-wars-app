{"version":3,"sources":["components/header/sw-logo.png","services/swapi-service.js","components/header/header.js","components/detail/detail.js","components/spinner/spinner.js","components/film-details/film-details.js","components/film-list/film-list.js","components/search/search.js","components/app/app.js","index.js"],"names":["module","exports","SwapiService","_url","getAllFilms","a","getSource","films","results","anAsyncFunction","item","substring","length","res","getAllQuery","list","Promise","all","map","urlRoute","fetch","this","mode","promise","ok","Error","status","json","body","url","match","Header","className","src","logo","alt","Detail","detail","detailName","getStatusDetail","id","getId","imageSrc","useState","portalOpen","setPortalState","href","onClick","event","preventDefault","title","name","Spinner","FilmDetails","film","toggleDetails","posterSrc","swapiService","titlesProps","Object","keys","filmProps","setFilmsProps","currentDetail","setDetail","coverSrc","setCover","obj","k","hasOwnProperty","episode_id","useEffect","filmDetails","index","key","i","type","ViewFilm","showDetails","setShowDetails","details","FilmList","visibleFilms","Search","setSearchQuery","searchQuery","query","setQuery","placeholder","value","onChange","target","trim","App","state","filmList","isSort","setState","sort","prevState","then","prevProps","filteredFilms","filter","toLocaleLowerCase","includes","b","localeCompare","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a3670015.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sw-logo.ec952e95.png\";","class SwapiService {\r\n\r\n    _url= 'https://swapi.co/api';\r\n\r\n    async getSource (urlRoute){\r\n        const promise = await fetch(`${this._url}${urlRoute}` , {\r\n            mode: \"cors\"\r\n        });\r\n\r\n        if(!promise.ok){\r\n            throw new Error(`Could not fetch ${urlRoute}, received ${promise.status}`)\r\n        }\r\n\r\n        const body = await promise.json();\r\n        return body\r\n    }\r\n\r\n    getId(item){\r\n        const idRegExp = /\\/([0-9]*)\\/$/;\r\n        const res =  item.url.match(idRegExp)[1];\r\n        return res;\r\n    };\r\n\r\n    getAllFilms = async () => {\r\n        const films = await this.getSource('/films/');\r\n        return films.results;\r\n    };\r\n\r\n\r\n    anAsyncFunction = async item => {\r\n        item = item.substring(this._url.length, item.length);\r\n        const res = await this.getSource(item);\r\n        return res;\r\n    };\r\n\r\n    getAllQuery = async (list) => {\r\n        return Promise.all(list.map(item => this.anAsyncFunction(item)))\r\n    };\r\n}\r\n\r\nexport default SwapiService;","import React from 'react';\r\nimport logo from './sw-logo.png';\r\n\r\nconst Header = ()=>{\r\n\r\n    return (\r\n        <header className=\"App-header\">\r\n            <img className=\"logo\" src={logo} alt=\"\"/>\r\n\r\n        </header>\r\n    )\r\n};\r\nexport default Header;\r\n","import React, {useState} from 'react';\r\nimport SwapiService from '../../services/swapi-service';\r\n\r\nimport './detail.css'\r\n\r\nconst Detail = ({detail, detailName, getStatusDetail}) => {\r\n\r\n        const swapiService = new SwapiService();\r\n        const id = swapiService.getId(detail);\r\n        const imageSrc = `https://starwars-visualguide.com/assets/img/${detailName}/${id}.jpg`;\r\n        const [portalOpen, setPortalState] = useState(false);\r\n\r\n    const togglePortal = event => {\r\n        setPortalState(!portalOpen);\r\n        event.preventDefault();\r\n    };\r\n\r\n    if(portalOpen) {\r\n        getStatusDetail({detail, imageSrc});\r\n    }\r\n        return (\r\n            <li\r\n                className=\"list-group-item\"\r\n            >\r\n\r\n                <div className=\"hero\">\r\n                    <img src={detailName ==='films'?`./img/ep-${id}.jpg`: imageSrc} alt=\"\"/>\r\n                </div>\r\n\r\n                <a href={detail}\r\n                   onClick={togglePortal}\r\n                >\r\n                        <span>\r\n                            {detailName === 'films'? detail.title: detail.name}\r\n                        </span>\r\n                </a>\r\n            </li>\r\n    )\r\n\r\n};\r\n\r\nexport default Detail;","import React from 'react';\r\nimport './spinner.css';\r\n\r\nconst Spinner = ()=>{\r\n    return (\r\n        <div className=\"spinner\">\r\n            <div className=\"loadingio-spinner-double-ring-q85b3h4fg4p\">\r\n                <div className=\"ldio-2r49py3qnqb\">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div>\r\n                        <div></div>\r\n                    </div>\r\n                    <div>\r\n                        <div></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n};\r\nexport default Spinner;\r\n","import React, {useState,useEffect, useLayoutEffect} from 'react';\r\nimport Detail from '../detail/detail'\r\nimport Spinner from '../spinner/spinner'\r\nimport SwapiService from '../../services/swapi-service';\r\n\r\nimport './film-details.css'\r\n\r\nconst FilmDetails = ({film, toggleDetails, posterSrc })=>{\r\n\r\n\r\n    const swapiService = new SwapiService();\r\n    const titlesProps = Object.keys(film);\r\n    const [filmProps, setFilmsProps] = useState(null);\r\n    const [currentDetail, setDetail] = useState(null);\r\n    const [coverSrc, setCover] = useState(null);\r\n\r\n    const fetch = async () => {\r\n        const obj = {};\r\n        for (let k in film) {\r\n            if (typeof film[k] === 'object') {\r\n                const res = await swapiService.getAllQuery(film[k]);\r\n                obj[k] = res;\r\n            }\r\n        }\r\n        setFilmsProps(obj);\r\n\r\n        if(film.hasOwnProperty('episode_id')) {\r\n            setCover(`./img/ep-${film.episode_id}.jpg`);\r\n        } else {\r\n            setCover(posterSrc);\r\n        }\r\n    };\r\n\r\n    useEffect(()=>{\r\n        fetch();\r\n    },[]);\r\n\r\n    const getStatusDetail = ({detail, imageSrc}) => {\r\n        setDetail(detail);\r\n        setCover(imageSrc)\r\n    };\r\n\r\n    const filmDetails = filmProps?titlesProps.map((detail, index)=> {\r\n\r\n                if (typeof film[detail] === 'object') {\r\n                    return  <ul className=\"list-group\"\r\n                                key={index}\r\n                    >\r\n                        {detail}\r\n                        {film[detail].map((item, i) =>\r\n                            <Detail\r\n                                key={i}\r\n                                detail={filmProps[detail][i]}\r\n                                detailName={detail}\r\n                                getStatusDetail={getStatusDetail}\r\n                            />)\r\n                        }\r\n                    </ul>\r\n\r\n                }\r\n                return<li className=\"list-group-item\"\r\n                          key={index}\r\n                >\r\n                    {detail}\r\n                    <p>\r\n                        {film[detail]}\r\n                    </p>\r\n                </li>\r\n            }):\r\n    <Spinner/>;\r\n\r\n    return (\r\n        currentDetail?<FilmDetails\r\n            film={currentDetail}\r\n            toggleDetails={toggleDetails}\r\n            posterSrc={coverSrc}\r\n        /> : <div className=\"film-details\">\r\n\r\n            <div className=\"card text-white bg-secondary mb-3\" >\r\n                <div className=\"card-header\">\r\n                    <button type=\"button\"\r\n                            className=\"btn btn-primary btn-sm\"\r\n                            onClick={toggleDetails}\r\n                    >\r\n                        Hide Details\r\n                    </button>\r\n                </div>\r\n\r\n                <img src={coverSrc} className=\"poster\" />\r\n\r\n                <div className=\"card-body\">\r\n\r\n                    <ul className=\"list-group\">\r\n                        {filmDetails}\r\n                    </ul>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default FilmDetails;","import React, {Fragment, useState} from 'react';\r\nimport FilmDetails from '../film-details/film-details'\r\nimport Spinner from '../spinner/spinner'\r\n\r\nconst FilmList = ({visibleFilms})=>{\r\n\r\n    const list = visibleFilms ? visibleFilms.map(film=>\r\n        <ViewFilm\r\n            key={film.episode_id}\r\n            film={film}\r\n        />\r\n    ): <Spinner/>;\r\n\r\n\r\n    return (\r\n        <div className=\"film-list\">\r\n\r\n            <ul className=\"list-group\">\r\n                {list}\r\n            </ul>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst ViewFilm =({film})=>{\r\n\r\n    const [showDetails, setShowDetails] = useState(false);\r\n\r\n    const toggleDetails = () => {\r\n        setShowDetails(!showDetails)\r\n    };\r\n\r\n    const details = showDetails?\r\n\r\n        <FilmDetails\r\n            film={film}\r\n            toggleDetails={toggleDetails}\r\n        />\r\n        :<Fragment>\r\n                <span>\r\n                    {film.title}\r\n                </span>\r\n\r\n            <button\r\n                type=\"button\"\r\n                className=\"btn btn-outline-warning btn-sm\"\r\n                onClick={toggleDetails}\r\n            >\r\n                Show Details\r\n            </button>\r\n        </Fragment>;\r\n\r\n\r\n    return (\r\n        <li className =\"list-group-item\r\n                        d-flex\r\n                        justify-content-between\r\n                        align-items-center\"\r\n        >\r\n            {details}\r\n        </li>\r\n    )\r\n};\r\n\r\n\r\nexport default FilmList;","import React, {useState} from 'react';\r\nimport './search.css'\r\n\r\nconst Search = ({setSearchQuery, searchQuery}) => {\r\n\r\n    const [query, setQuery] = useState(searchQuery);\r\n\r\n    const setNewQuery = (event) => {\r\n        const query = event.target.value;\r\n        setQuery(query);\r\n    };\r\n\r\n    const sendQuery = (event) => {\r\n        event.preventDefault();\r\n        setSearchQuery(query.trim());\r\n    };\r\n\r\n    return (\r\n        <div className=\"search\">\r\n                    <form className=\"form-inline my-2 my-lg-0\">\r\n                        <input\r\n                            className=\"form-control mr-sm-2\"\r\n                            type=\"text\"\r\n                            placeholder=\"Search\"\r\n                            value={query}\r\n                            onChange={setNewQuery}\r\n                        />\r\n                            <button className=\"btn btn-secondary my-2 my-sm-0\" type=\"submit\"\r\n                                    onClick={sendQuery}\r\n                            >Search</button>\r\n                    </form>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Search;","import React from 'react';\r\nimport SwapiService from '../../services/swapi-service';\r\nimport Header from '../header/header';\r\nimport FilmList from '../film-list/film-list';\r\nimport Search from '../search/search';\r\nimport './app.css';\r\n\r\nclass App extends React.Component{\r\n\r\n      swapiService = new SwapiService();\r\n\r\n      state = {\r\n          searchQuery: '',\r\n          filmList: null,\r\n          visibleFilms: null,\r\n          isSort: false\r\n      };\r\n\r\n  setSearchQuery = (searchQuery) => {\r\n      this.setState({searchQuery});\r\n  };\r\n\r\n  sort = () => {\r\n      this.setState(prevState=>({isSort: !prevState.isSort}));\r\n  };\r\n\r\n  componentDidMount(){\r\n      this.swapiService.getAllFilms()\r\n          .then(filmList=>\r\n              this.setState({\r\n                  filmList,\r\n                  visibleFilms: filmList\r\n              })\r\n          );\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState){\r\n      const {searchQuery, filmList, isSort} = this.state;\r\n\r\n      if(prevState.searchQuery !== searchQuery || prevState.isSort !== isSort) {\r\n\r\n          const filteredFilms = filmList.filter(film=>film.title.toLocaleLowerCase().includes(searchQuery.toLocaleLowerCase()));\r\n          if(isSort) {\r\n              const visibleFilms = [...filteredFilms].sort((a, b)=>a.title.localeCompare(b.title));\r\n              this.setState({visibleFilms})\r\n          }\r\n          if(!isSort) {\r\n              const visibleFilms = [...filteredFilms].sort((a, b)=>b.title.localeCompare(a.title));\r\n              this.setState({visibleFilms})\r\n          }\r\n      }\r\n  }\r\n\r\n  render(){\r\n      const {visibleFilms, searchQuery} = this.state;\r\n\r\n      return (\r\n          <div className=\"App\">\r\n              <Header/>\r\n\r\n              <Search\r\n                  setSearchQuery={this.setSearchQuery}\r\n                  searchQuery={searchQuery}\r\n              />\r\n              <div className=\"sort\">\r\n                  <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-primary\"\r\n                      onClick={this.sort}\r\n                  >\r\n                      Sort by title\r\n                  </button>\r\n              </div>\r\n              <FilmList visibleFilms={visibleFilms}/>\r\n          </div>\r\n      );\r\n  }\r\n\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app/app';\r\n\r\nReactDOM.render(\r\n    <App />,\r\n    document.getElementById('root')\r\n);"],"sourceRoot":""}